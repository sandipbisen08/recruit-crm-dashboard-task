@import '../variables';

.dashboard-container {
    display: flex;
    height: 100vh;
    background-color: #f7f9fc;
    overflow: hidden;

    // ===== RESPONSIVE DESIGN =====
    
    // Mobile styles - vertical stack layout
    @include mobile {
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
    }
}

// Mobile hamburger menu
.mobile-menu-toggle {
    display: none;
    
    @include mobile {
        display: block;
        position: fixed;
        top: $spacing-md;
        left: $spacing-md;
        z-index: $z-index-fixed;
        background: $primary-color;
        color: white;
        border: none;
        border-radius: $border-radius-sm;
        padding: $spacing-sm;
        font-size: $font-size-lg;
        cursor: pointer;
        min-width: 44px;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: $shadow-md;
        
        &:hover {
            background: $primary-dark;
        }
        
        &:active {
            transform: scale(0.95);
        }
    }
}

.sidebar-left {
    width: 80px;
    background-color: #0d2854;
    color: white;
    padding: 1rem 0;
    flex-shrink: 0;

    // Mobile responsive - horizontal layout at top
    @include mobile {
        width: 100%;
        height: $sidebar-height-mobile;
        padding: 0;
        order: 1;
        position: relative;
        z-index: $z-index-sticky;
        
        // Hide by default, show when menu is open
        &.mobile-hidden {
            display: none;
        }
        
        &.mobile-visible {
            display: flex;
        }
    }
}

.main-wrapper {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;

    // Mobile responsive
    @include mobile {
        order: 2;
        height: calc(100vh - #{$sidebar-height-mobile});
        
        // Adjust when sidebar is hidden
        &.sidebar-hidden {
            height: 100vh;
        }
    }
}

.header {
    height: 70px;
    background-color: #ffffff;
    border-bottom: 1px solid #e0e0e0;
    display: flex;
    align-items: center;
    flex-shrink: 0;

    // Mobile responsive
    @include mobile {
        height: $header-height-mobile;
        padding-left: 60px; // Make room for hamburger menu
    }
}

.content-area {
    display: flex;
    flex-grow: 1;
    padding: 0.5rem;
    gap: 1.5rem;
    overflow: hidden;

    // Tablet responsive
    @include tablet {
        padding: $spacing-lg;
        gap: $spacing-lg;
    }

    // Mobile responsive - vertical stack
    @include mobile {
        flex-direction: column;
        padding: $spacing-lg;
        gap: $spacing-lg;
        overflow-y: auto;
    }
}

.main-content {
    flex-grow: 1;
    background-color: #ffffff;
    border-radius: 8px;
    padding: 1.5rem;
    overflow-y: auto;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

    // Tablet responsive
    @include tablet {
        padding: $spacing-xl;
        border-radius: $border-radius-md;
    }

    // Mobile responsive
    @include mobile {
        order: 1;
        padding: $spacing-lg;
        border-radius: $border-radius-md;
        overflow-y: visible;
        flex-shrink: 0;
    }
}

.sidebar-right {
    width: 350px;
    min-width: 300px;
    background-color: #E6E9EC;
    border-radius: 8px;
    padding: 1.5rem;
    overflow-y: auto;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    flex-shrink: 0;

    // Tablet responsive
    @include tablet {
        width: $right-sidebar-width-tablet;
        min-width: 280px;
        padding: $spacing-xl;
    }

    // Mobile responsive - hidden by default, shown as overlay
    @include mobile {
        position: fixed;
        top: 0;
        right: -100%;
        width: 90%;
        max-width: 400px;
        height: 100vh;
        z-index: $z-index-modal;
        border-radius: 0;
        box-shadow: $shadow-lg;
        transition: right 0.3s ease-in-out;
        order: 2;
        
        &.sidebar-open {
            right: 0;
        }
    }
}

// Mobile overlay backdrop for right sidebar
.sidebar-backdrop {
    display: none;
    
    @include mobile {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: $z-index-modal - 1;
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
        
        &.active {
            display: block;
            opacity: 1;
        }
    }
}

// Mobile right sidebar toggle button
.sidebar-right-toggle {
    display: none;
    
    @include mobile {
        display: block;
        position: fixed;
        bottom: $spacing-2xl;
        right: $spacing-lg;
        z-index: $z-index-fixed;
        background: $primary-color;
        color: white;
        border: none;
        border-radius: $border-radius-full;
        width: 56px;
        height: 56px;
        font-size: $font-size-xl;
        cursor: pointer;
        box-shadow: $shadow-lg;
        
        &:hover {
            background: $primary-dark;
        }
        
        &:active {
            transform: scale(0.95);
        }
    }
}

/* Enhanced Responsive Design */

// Desktop large screens
@include desktop-large {
    .content-area {
        padding: $spacing-xl;
        gap: $spacing-2xl;
    }
    
    .main-content {
        padding: $spacing-2xl;
    }
    
    .sidebar-right {
        width: $right-sidebar-width-desktop;
        padding: $spacing-2xl;
    }
}

// Desktop styles
@include desktop {
    .sidebar-right {
        width: $right-sidebar-width-desktop;
    }
    
    .content-area {
        gap: $spacing-xl;
    }
}

// Legacy media queries for backward compatibility
@media (max-width: 1200px) {
    .sidebar-right {
        width: 300px;
        min-width: 280px;
    }
    
    .content-area {
        padding: 1rem;
        gap: 1rem;
    }
}

@media (max-width: 768px) {
    .dashboard-container {
        flex-direction: column;
    }
    
    .sidebar-left {
        width: 100%;
        height: 60px;
        padding: 0.5rem;
        display: flex;
        justify-content: center;
        align-items: center;
        
        .sidebar-icon, .sidebar-icon-bottom {
            margin: 0 0.5rem;
        }
    }
    
    .content-area {
        flex-direction: column;
        padding: 1rem;
    }
    
    .sidebar-right {
        width: 100%;
        min-width: auto;
        order: 2;
    }
    
    .main-content {
        order: 1;
    }
}

// Utility classes for responsive behavior
.mobile-only {
    display: none;
    
    @include mobile {
        display: block;
    }
}

.tablet-up {
    display: none;
    
    @include tablet-up {
        display: block;
    }
}

.desktop-only {
    display: none;
    
    @include desktop {
        display: block;
    }
}

// Mobile-specific layout helpers
@include mobile {
    .mobile-stack {
        flex-direction: column !important;
    }
    
    .mobile-center {
        text-align: center !important;
    }
    
    .mobile-full-width {
        width: 100% !important;
    }
    
    .mobile-hidden {
        display: none !important;
    }
}
